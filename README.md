# FChan

Proof-of-concept for flexible channels protocol: private communications over public blockchains.

## Demo

The `client/` project simply executes a sequence of operations that demonstrate the essential functionality of the protocol. It will generate and upload a key to a key repository for two different accounts, and then send messages between the two accounts. In order for it to work properly, create a `.env` file at the workspace root with the following contents:

```ini
KEY_FILE_PATH="<path>"
NETWORK="testnet"
KEY_REGISTRY_ACCOUNT_ID="<account-id>"
MESSAGE_REPOSITORY_ACCOUNT_ID="<account-id>"
MESSENGER_SECRET_KEY="<secret-key>"
```

`KEY_FILE_PATH` is the location of a NEAR key file (same format generated by `near-cli`). Usually these are located at `<USER_HOME>/.near-credentials/<network>/<account>.json`.

`MESSENGER_SECRET_KEY` is a base64-encoded x25591 secret. You can generate one by running the following command:

```text
$ cargo test --package fc-client --bin fc -- tests::generate_messenger_secret_key --exact --nocapture --ignored
...

running 1 test
"8FeWZ2I4TR0AXZNp0kRAz72Kjn8nSl7J/2pwFjCQdFk="
test tests::generate_messenger_secret_key ... ok

...
```

Then you can use the generated key for testing purposes.

A test key registry is `dev-1677133604850-79852956982344`, and a test message repository is `dev-1677862759545-28354394598052`.

Then you can run `cargo run` from the `client/` directory and it should open the chat client.

## Authors

- Jacob Lindahl [@sudo_build](https://twitter.com/sudo_build)
